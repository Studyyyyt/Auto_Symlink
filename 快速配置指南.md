# Auto_Symlink Docker 快速配置指南

## 🚀 快速开始

### 1. 下载配置文件
```bash
# 下载 docker-compose.yaml 文件
# 或者复制 docker-compose.example.yaml 为 docker-compose.yaml
cp docker-compose.example.yaml docker-compose.yaml
```

### 2. 修改路径配置
编辑 `docker-compose.yaml` 文件，修改以下路径：

#### 云盘路径映射
```yaml
# 找到这一行并修改为您的实际云盘路径
- /your/cloud/path:/your/cloud/path:rslave
```

**常见路径示例：**
- 群晖：`/volume1/CloudNAS:/volume1/CloudNAS:rslave`
- Ubuntu/Debian：`/mnt/clouddrive:/mnt/clouddrive:rslave`
- CentOS/RHEL：`/media/cloud:/media/cloud:rslave`

#### 媒体库路径映射
```yaml
# 找到这一行并修改为您的实际媒体库路径
- /your/media/path:/media
```

**常见路径示例：**
- 群晖：`/volume2/Media:/media`
- Ubuntu/Debian：`/mnt/media:/media`
- CentOS/RHEL：`/media/movies:/media`

### 3. 启动服务

#### Linux/macOS 用户
```bash
# 给启动脚本执行权限
chmod +x start.sh

# 运行启动脚本
./start.sh
```

#### Windows 用户
```cmd
# 双击运行 start.bat
# 或者在命令行中运行
start.bat
```

#### 手动启动
```bash
# 创建必要目录
mkdir -p config logs

# 启动服务
docker-compose up -d

# 查看日志
docker-compose logs -f auto_symlink
```

## 🔧 配置示例

### 群晖 NAS 配置示例
```yaml
volumes:
  - /volume1/CloudNAS:/volume1/CloudNAS:rslave
  - /volume2/Media:/media
  - ./config:/app/config
  - ./logs:/app/logs
```

### Ubuntu/Debian 配置示例
```yaml
volumes:
  - /mnt/clouddrive:/mnt/clouddrive:rslave
  - /mnt/media:/media
  - ./config:/app/config
  - ./logs:/app/logs
```

### Windows WSL 配置示例
```yaml
volumes:
  - /mnt/c/CloudDrive:/mnt/c/CloudDrive:rslave
  - /mnt/c/Media:/media
  - ./config:/app/config
  - ./logs:/app/logs
```

## 🌐 访问 Web 界面

启动成功后，访问：
- **地址**：http://localhost:8095
- **账号**：admin
- **密码**：password

## 📝 常用命令

```bash
# 查看服务状态
docker-compose ps

# 查看日志
docker-compose logs -f auto_symlink

# 停止服务
docker-compose down

# 重启服务
docker-compose restart

# 更新镜像
docker-compose pull
docker-compose up -d
```

## ⚠️ 重要注意事项

### 1. 路径配置
- **必须使用绝对路径**
- **云盘路径左右必须完全一致**
- **EMBY/Jellyfin 也要使用相同的绝对路径**

### 2. 群晖用户
- 需要使用命令行创建容器（GUI不支持rslave模式）
- 需要添加开机任务：
  ```bash
  mount --make-shared /volume1/
  mount --make-shared /volume2/
  systemctl daemon-reload
  ```

### 3. 权限问题
- 确保容器有足够权限创建软链接
- 已配置为root用户运行

## 🆘 故障排除

### 容器无法启动
1. 检查路径是否正确
2. 检查端口是否被占用
3. 查看容器日志：`docker-compose logs auto_symlink`

### Web界面无法访问
1. 检查端口映射：`docker-compose ps`
2. 检查防火墙设置
3. 确认容器正在运行

### 软链接创建失败
1. 检查云盘路径是否正确
2. 确认使用了rslave模式
3. 检查权限设置

## 📞 获取帮助

- **Telegram群组**：https://t.me/autosymlink_channel
- **项目文档**：https://github.com/shenxianmq/Auto_Symlink/wiki
- **GitHub Issues**：https://github.com/shenxianmq/Auto_Symlink/issues
